Multilevel machines
 - has different level of abstractions, where Level 0 is no abstract and can be directly executed by electronic circuits
 - Code in higher machine languages can be compiled down to lower languages, until L0
 - Contemporary multi level are six level computers
	 - Level 5 - Problem oriented language level
		 - Is translated downwards using a compiler
	 - Level 4 - Assembly language level
		 - Is translated downwards using an assembler
	 - Level 3 - Operating system machine level
		 - Is partially interpreted by the operating system
	 - Level 2 - Instruction set architecture level
		 - Interpreted as a microprogram or direct execution
	 - Level 1 - Microarchitecture level
		 - Hardware level
	 - level 0 - Digital logic level
 - Computer generations
	 - 0th generation - Mechanical computers (1642 - 1945)
	 - 1st generation - Vacuum Tubes (1945-1955)
	 - 2nd Generation - Transistors (1955 - 1965)
	 - 3rd generation - Integrated circuits (1965 - 1980)
	 - 4th generation - Very large scale integration (VLSI, 1980-?)
 - Von Neumann machine
	 - has three parts, Control Unit, Arithmetic Logic Unit, and Memory
	 - three parts can talk to each other, ALU has input and output
	 - Data path:
		 - has General Purpose registers which store the result of calculations / input to the ALU
		 - Data from the GPRs are sent to the ALU input register, A and B, one for each operand
		 - Sent as input to the ALU, and the output is stored in the output register, which can be sent back to the GPRs
	 - Execution cycle
		 - Fetch next instruction from memory into instruction register
		 - Change program counter to point to next instruction
		 - Determine the type of instruction just fetched
			 - If instruction uses data from memory, determine where to fetch the data into the CPU register
		 - Execute instruction
		 - Repeat
 - Design principles for modern computers
	 - All instructions directly executed by hardware
	 - Maximize the rate at which instructions are issued
	 - Instructions should be easy to decode
	 - Only loads and stores should reference memory
	 - Provide plenty of registers
 - Pipelining
	 - Allows for multiple instructions to happen "at the same time" in different parts of the execution cycle
		 - 1 instruction could be executing while the next one is loading.
	 - A 5 stage pipeline
		 - S1 - Instruction fetch unit
		 - S2 - instruction decode unit
		 - S3 - Operand fetch unit
		 - S4 - Instruction execution unit
		 - S5 - Write back unit
	 - Superscalar architecture
		 - has 2 five-stage-pipelines but with a common instruction fetch unit (They share the same S1)
 - Processor level parallelisms
	 - A single bus multiprocessor
		 - All CPUs have access to a common bus and shared memory
	 - Some multicomputers have local memories, only the CPU can access their local memory, not the memory of other CPUs

8086
 - the 8086 microprocessor family has taken the lead in the personal computer market
 - used everyone from control systems to superfast network servers
 - pentium offers compatibility with all previous 8086 machines, with many new architectural components
 - capable of addressing 1MB of memory
	 - uses 20 address lines to get 2^20 bytes of memory
 - 80886 above were capable of addressing 4GB of memory since it contains 32 memory address lines (a 32-bit system)
	 - Can perform many OS chores such as multitasking, virtual memory addressing, memory management and protection, and control over internal data and instruction cache
 - Real mode
	 - has an associated 1MB memory limit
 - Protected mode
	 - full 4GB of memory is available to the processor
 - internal block diagram
	 - ![[Pasted image 20240224164033.png]]
	 - Is separated into the execution unit and bus interface unit that has a multiplexed bus going through both sides
	 - Data Registers, ALU and flag register are in execution unit
	 - Segment registers and pointers are in BIU
		 - the BIU is in charge of address generation for memory segment + stack pointer
	 - Pipelining
		 - allows the instructions to fetch data while it's executing the current instruction
	 - Registers
		 - data registers
			 - 16 bit registers like AX BX CX DX which can be split into 8 bit registers with AH AL, BH BL, etc.
			 - AX - accumulator
			 - BX - base address register
			 - CX - counter for loop operations
			 - DX - point to data in I/O operations
		 - five pointer and index registers, all 16 bits wide
			 - SP - the stack pointer permits the system to access data in the stack segment
			 - BP - the base pointer facilitates dereferencing parameters, which are the data and addresses that a program passes through the stack
			 - IP - the instruction pointer contains the offset address of the next instruction that is to be executed
			 - SI - the source index is required for some string operations and is associated with the DS register
			 - DI - the destination index is required for some string operations and is associated with the ES register
		 - Segment registers
			 - CS - code segment - used during instruction fetches
			 - DS - data segment - most used by default when reading or writing data
			 - SS - stack segment - used during stack operations such as subroutine calls and returns
			 - ES - extra segment - used for anything the programmer wishes
		 - Flag register - used to indicate results of arithmetic and logical instructions
		 - data registers & pointer and index registers make up the general purpose registers
		 - Extended registers
			 - begin with the 80386, are prefixed with e
			 - extends data / pointer and index registers, and adds FS and GS as segment registers

Addressing
 - real mode addressing space
	 - a 1MB memory space is broke down into 16 segments of 64KB each
	 - a segment contains all the memory locations that can be reached when a particular number in a certain segment register is used
	 - small areas of the addressing space are reserved for special operation
		 - locations FFFF0 through FFFFF are assigned the role of storing initial instruction to be used after a reset operation
		 - 00000 through 003FF are used to store the addresses for all 256 interrupts
	 - 32 bit registers operate as 16 bits to maintain compatibility with earlier 80x86 machines

Endianness
 - the low byte is stored in the lower address space
 - the high byte is stored in the higher address space
 - the number 0xAABB is stored as 0xBBAA since the lower (left) address contains the low byte

Assembler directives
 - designed to create the required data and perform all appropriate memory allocation and data formatting for little endian values
 - DB - define byte
 - DW - define word
 - DUP - used when many reserved byte or word spaces are needed
 - EQU - equte - defines a value that can be used in other source statements but does not need to generate any code
 - A special technique is used to utilize the 32 bit integer on an instruction by instruction basis
	 - Operand size prefix, a special 1 byte code inserted before each instruction that uses a 16-bit registers
	 - Tells then to use entire 32-bit length, 1-byte code will have the value of 66 in hex.
